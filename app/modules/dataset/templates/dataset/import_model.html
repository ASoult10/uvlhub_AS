{% extends "base_template.html" %}

{% block content %}
<div class="container mt-4">
    <h2>Import Feature Model Dataset</h2>

    <form id="import-form" method="POST" enctype="multipart/form-data">

        <div class="mb-3">
            <label class="form-label fw-bold">Import from GitHub</label>
            <input type="text" class="form-control" id="github_url" name="github_url" placeholder="https://github.com/user/repo">
        </div>

        <div class="mb-3">
            <label class="form-label fw-bold">Or upload a ZIP file</label>
            <input type="file" class="form-control" id="zip_file" name="zip_file" accept=".zip">
        </div>

        <button class="btn btn-primary" type="submit">Import</button>
    </form>

    <div id="result" class="mt-4"></div>
</div>

<script>
document.getElementById("import-form").addEventListener("submit", async function(e) {
    e.preventDefault();

    const formData = new FormData();
    const githubUrl = document.getElementById("github_url").value;
    const zipFile = document.getElementById("zip_file").files[0];

    if (githubUrl) formData.append("github_url", githubUrl);
    if (zipFile) formData.append("zip_file", zipFile);

    const response = await fetch("/api/v1/datasets/import-model", {
        method: "POST",
        body: formData
    });

    const data = await response.json();
    document.getElementById("result").innerHTML =
        `<pre>${JSON.stringify(data, null, 4)}</pre>`;
});
</script>
{% endblock %}
